<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <base th:href="@{/}">
    <title>科技成果服务平台</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" href="../static/css/index.css" th:href="@{/css/index.css}">
    <link rel="stylesheet" href="../static/css/event-list.css" th:href="@{/css/event-list.css}">
    <style>

        .go-top {
            position: fixed;
            bottom: 10px;
            right: 10px;

            cursor: pointer;
        }
    </style>
    <style>
        .pagination button:hover {
            background: #0186d5;
            color: white;
        }

        .pagination button {
            border: 0;
            background: #e5f0fb;
            color: #404d5f;
            width: 30px;
            height: 25px;
        }
    </style>

</head>
<body class="default">
<section class="row top_bar">
    <div class="" style="margin-left: 62px;margin-right:60px;margin-top: 10px;">
        <div class="row">
            <div class="fleft phone">
                <p><a href="#" style="
    text-decoration: none;
    color: #03536A;
">Intelligent Service Platform for Science and Technology Information</a></p>
            </div>
            <div class="fright">

                <div class="fleft" sec:authorize="!isAuthenticated()"><strong><a href="#" th:href="@{/user/login}"
                                                                                 style="
          			text-decoration: none;
          			color: #03536A;">Sign in</a></strong></div>
                <div class="fleft" sec:authorize="isAuthenticated()"><span style="
                    text-decoration: none;
                    color: #03536A;"><span class="glyphicon glyphicon-user"></span>&nbsp;<strong
                        sec:authentication="name"></strong></span></div>
            </div>
        </div>
    </div>
</section>

<nav class="navbar navbar-default navbar-static-top navbar2"style="background: #0186d5;">
    <div class="container" style="margin-left: -10px;">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main_nav" aria-expanded="false">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- <a href="book-appointment.html" class="navbar-toggle visible-xs" data-toggle="modal" data-target="#appointmefnt_form_pop">Search</a> -->
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="main_nav">
            <a href="../static/index.html" th:href="@{/index.html}">
                <img id="img_icon" src="../static/assets/icon.png" th:src="@{/assets/icon.png}" alt=""></a>
            <ul  class="nav navbar-nav navbar-right">
                <li class="active"><a href="../static/index.html" th:href="@{/index}">Home</a></li>


                <!-- <li class="dropdown">
                     <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Research</a>
                     <ul class="dropdown-menu" role="menu">
                         <li><a href="direction/directionlist" th:href="@{/direction/directionlist}">Directions</a></li>
                         <li><a href="paper/paperlist" th:href="@{/paper/paperlist}">Papers</a></li>
                         <li><a href="project/projectlist" th:href="@{/project/projectlist}">Projects</a></li>
                     </ul>
                 </li>-->
                <li><a href="direction/directionlist" th:href="@{/paper/paperlist}">Paper</a></li>
                <li><a href="person/personlist" th:href="@{/person/personlist}">People</a></li>
                <li><a href="news/newslist" th:href="@{/news/newslist}">News</a></li>
                <li><a href="../static/aboutus.html" th:href="@{/aboutus}">About Us</a></li>
                <li><a href="resource/resourcelist" th:href="@{/resource/resourcelist}">Document</a></li>


                <!--<li><a href="../static/join.html" th:href="@{/join}">Join Us</a></li>-->
                <!-- <li class="hidden-xs book"><a href="#" data-toggle="modal" data-target="#appointmefnt_form_pop">Search</a></li> -->
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container -->
</nav>
<div class="content">
    <div class="container" style="padding: 20px;">
        <div class="col-md-12 col-sm-12">
            <div class="e-selector tabs">
            </div>
        </div>
    </div>
    <section class="row content_section">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-8 blog_list">
                    <div class="row m0 widget categories">
                        <h5 class="widget_heading">&nbsp;&nbsp; News</h5>
                    </div>
                    <div id="news_container">
                        <!--/*@thymesVar id="newsPage" type="org.springframework.data.domain.Page<com.xh.website.module.news.entity.News>"*/-->
                        <div class="media blog" th:each="news : ${newsPage.getContent()}">

                            <div class="media-left">
                                <a th:href="@{/news/news(id=${news.getId()})}" target="_blank" ><img
                                        style="width: 260px;height: 130px;object-fit: cover" th:src="${news.getPhoto()}" src="../static/assets/blog/blog/1.jpg"
                                        class="img-reponsive"></a>
                            </div>
                            <div class="media-body">
                                <a th:href="@{/news/news(id=${news.getId()})}" href="../static/news.html"><h4
                                        th:text="${news.getTitle()}">title</h4></a>
                                <div class="row m0 meta">
                                    <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span><a href="#"
                                                                                                            th:text="${news.getDate()}">2017
                                    /
                                    09 / 10</a>
                                </div>
                                <p th:text="${news.getContent()}">Fusce ut velit sempersemper arcu quis, aliquam
                                    magnatiam
                                    sed justo et sem varius euismodn
                                    ac justo urnaonec tincidunt nisl semper sapien ut velit sempersemper arcu quis,
                                    aliquam
                                    magnatiam sed justo et sem varius euismodn ac justo urnaonec tincidunt nisl semper
                                    sapien.</p>
                            </div>
                        </div> <!--single blog-->
                    </div>


                    <div class="row paginationRow" style="clear: both">
                        <div class="pagination">
                            <button class="btn-group btn-group-lg" type="button" id="news_first"><span
                                    class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span>
                            </button>
                            <button type="button" id="news_prev"><span
                                    class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span>
                            </button>
                            <button type="button" id="news_next"><span
                                    class="glyphicon glyphicon-triangle-right"
                                    aria-hidden="true"></span></button>
                            <button type="button" id="news_last"><span
                                    class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4 sidebar">

                    <div class="row m0 widget categories">
                        <h5 class="widget_heading">Notification</h5>
                        <div class="new_list" id="not_container">
                            <!--/*@thymesVar id="notPage" type="org.springframework.data.domain.Page<com.xh.website.module.news.entity.News>"*/-->
                            <div class="new" th:each="notification : ${notPage.getContent()}">
                                <div class="new_date">
                                    <div class="day" th:text="${notification.getDate().getDate()}+th">12th</div>
                                    <div class="month " th:text="${notification.getDate().getMonth()+1}">10</div>
                                </div>
                                <div class="new_content">
                                    <a th:href="@{/news/notification(id=${notification.getId()})}">
                                        <p class="new_content_day" th:text="${notification.getTitle()}">Today</p>
                                    </a>
                                    <p class="new_content_abs" th:text="${notification.getContent()}">Lorem ipsum dolor
                                        sit amet, consectetur adipiscing elit.
                                        Aenean euismod bibendum laoreet. Proin gravida dolor sit amet </p>
                                </div>

                            </div>

                        </div>
                    </div>


                    <div class="row paginationRow" style="clear: both">
                        <div class="pagination">
                            <button type="button" id="not_first"><span
                                    class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span>
                            </button>
                            <button type="button" id="not_prev"><span
                                    class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span>
                            </button>
                            <button type="button" id="not_next"><span
                                    class="glyphicon glyphicon-triangle-right"
                                    aria-hidden="true"></span></button>
                            <button type="button" id="not_last"><span
                                    class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<footer class="row" style="padding-top: 30px;">
    <div class="container">
        <div class="row">
            <div class="col-sm-8 col-md-7 col-lg-4 footer_menuList">
                <div class="row menuList">
                    <ul class="firstOrderList nav" style="text-transform: initial">
                        <li><a href="#"><img style="width:40%;height: 30%;float: left;margin-left:40px ;" src="assets/wq4.png" alt=""></a></li>

                    </ul>
                </div>
            </div>
            <div class="col-sm-4 col-md-5 col-lg-5 footer_menuList">
                <div class="row menuList">
                    <ul class="firstOrderList nav" style="text-transform: initial">
                        <li><a href="">Jilin University</a></li>

                        <li><a href="">College of Software Engineering</a></li>
                    </ul>
                </div>
            </div>

            <div class="fright copyright col-sm-6 col-md-6 col-lg-12" style="text-align: center;margin-top: -22px;">&copy; <a href="index"> 吉林大学软件工程学院 </a></div>
        </div>
    </div>
</footer>
<a href="javascript:void(0)" onclick="location.hash='#top';location.replace(location.href)">
    <button type="button" class="btn btn-primary btn-lg go-top">
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </button>
</a>
<form hidden="hidden" id="newsPageForm">
    <!--/*@thymesVar id="newsPage" type="org.springframework.data.domain.Page<com.xh.website.module.news.entity.News>"*/-->
    <input type="hidden" name="newsPageNow" id="newsPageNow" th:value="${newsPage.getNumber()}">
    <input type="hidden" id="newsTotalPages" th:value="${newsPage.getTotalPages()}">
</form>

<form hidden="hidden" id="notPageForm">
    <!--/*@thymesVar id="notPage" type="org.springframework.data.domain.Page<com.xh.website.module.news.entity.News>"*/-->
    <input type="hidden" name="notPageNow" id="notPageNow" th:value="${notPage.getNumber()}">
    <input type="hidden" id="notTotalPages" th:value="${notPage.getTotalPages()}">
</form>

<script src="../static/js/jquery-2.1.3.min.js" th:src="@{/js/jquery-2.1.3.min.js}"></script>

<script src="../static/js/layer/layer.min.js" th:src="@{/js/layer/layer.min.js}"></script>
<script type="text/javascript">
    /*字符串格式化工具*/
    String.prototype.format = function () {
        if (arguments.length === 0) return this;
        var obj = arguments[0];
        var s = this;
        for (var key in obj) {
            s = s.replace(new RegExp("\\{\\{" + key + "\\}\\}", "g"), obj[key]);
        }
        return s;
    };

    var element1 = "<div class=\"media blog\">\n" +
        "\n" +
        "                        <div class=\"media-left\">\n" +
        "                            <a href=\"{{href}}\"><img   style=\"width: 260px;height: 130px;object-fit: cover\" src=\"{{photo}}\"\n" +
        "                                                      class=\"img-reponsive\"></a>\n" +
        "                        </div>\n" +
        "                        <div class=\"media-body\">\n" +
        "                            <a href=\"{{href}}\"><h4>{{title}}</h4></a>\n" +
        "                            <div class=\"row m0 meta\">\n" +
        "                                <span class=\"glyphicon glyphicon-calendar\" aria-hidden=\"true\"></span><a href=\"#\">{{date}}</a>\n" +
        "                            </div>\n" +
        "                            <p>{{content}}</p>\n" +
        "                        </div>\n" +
        "                    </div>";

    var element2 = "<div class=\"new\">\n" +
        "                        <div class=\"new_date\">\n" +
        "                            <div class=\"day\">{{day}}th</div>\n" +
        "                            <div class=\"month \">{{month}}</div>\n" +
        "                        </div>\n" +
        "                        <div class=\"new_content\">\n" +
        "                            <a href='{{href}}'><p class=\"new_content_day\">{{title}}</p></a>\n" +
        "                            <p class=\"new_content_abs\">{{content}}</p>\n" +
        "                        </div>\n" +
        "                    </div>";


    /*查询成功后更改对应的显示内容*/
    function whenNewsQuerySuccess(pager, status) {
        var html = "";
        var datas = pager['content'];
        $.each(datas, function (i, data) {
            var news = {
                photo: data['photo'],
                href: "news/news?id=" + data['id'],
                title: data['title'],
                date: data['date'],
                content: data['content']
            };
            html += element1.format(news);
        })
        $("#news_container").html(html);
    }

    function whenNotQuerySuccess(pager, status) {
        var html = "";
        var datas = pager['content'];
        $.each(datas, function (i, data) {
            var date = new Date(data['date']);
            console.log(date);
            var news = {
                day: date.getDate(),
                month: date.getMonth() + 1,
                title: data['title'],
                content: data['content'],
                href: "news/notification?id=" + data['id']
            };
            html += element2.format(news);
        })
        $("#not_container").html(html);
    }


    $(function () {
        /*news页面的ajax分页*/
        var newsPageNowElem = $("#newsPageNow");


        $("#news_first").click(function () {
            if (newsPageNowElem.val() <= 0) {
                layer.msg("It's already the first page.");
                return;
            }

            newsPageNowElem.val(0);
            $.get("news/newspage",
                $("#newsPageForm").serialize(),
                function (pager, status) {
                    whenNewsQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#news_prev").click(function () {
            if (newsPageNowElem.val() <= 0) {
                layer.msg("There is no previous page.");
                return;
            }
            newsPageNowElem.val(parseInt(newsPageNowElem.val()) - 1);
            $.get("news/newspage",
                $("#newsPageForm").serialize(),
                function (pager, status) {
                    whenNewsQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#news_next").click(function () {
            if (newsPageNowElem.val() >= $("#newsTotalPages").val() - 1) {
                layer.msg("There is no next page.");
                return;
            }
            newsPageNowElem.val(parseInt(newsPageNowElem.val()) + 1);

            $.get("news/newspage",
                $("#newsPageForm").serialize(),
                function (pager, status) {
                    whenNewsQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#news_last").click(function () {
            if (newsPageNowElem.val() >= $("#newsTotalPages").val() - 1) {
                layer.msg("It's already the last page.");
                return;
            }

            newsPageNowElem.val(parseInt($("#newsTotalPages").val() - 1));

            $.get("news/newspage",
                $("#newsPageForm").serialize(),
                function (pager, status) {
                    whenNewsQuerySuccess(pager, status);
                },
                'json'
            )
        });
    })
    $(function () {
        /*not页面的ajax分页*/
        var notPageNowElem = $("#notPageNow");


        $("#not_first").click(function () {
            if (notPageNowElem.val() <= 0) {
                layer.msg("It's already the first page.");
                return;
            }

            notPageNowElem.val(0);
            $.get("news/notpage",
                $("#notPageForm").serialize(),
                function (pager, status) {
                    whenNotQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#not_prev").click(function () {
            if (notPageNowElem.val() <= 0) {
                layer.msg("There is no previous page.");
                return;
            }
            notPageNowElem.val(parseInt(notPageNowElem.val()) - 1);
            $.get("news/notpage",
                $("#notPageForm").serialize(),
                function (pager, status) {
                    whenNotQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#not_next").click(function () {
            if (notPageNowElem.val() >= $("#notTotalPages").val() - 1) {
                layer.msg("There is no next page.");
                return;
            }
            notPageNowElem.val(parseInt(notPageNowElem.val()) + 1);

            $.get("news/notpage",
                $("#notPageForm").serialize(),
                function (pager, status) {
                    whenNotQuerySuccess(pager, status);
                },
                'json'
            )
        });
        $("#not_last").click(function () {
            if (notPageNowElem.val() >= $("#notTotalPages").val() - 1) {
                layer.msg("It's already the last page.");
                return;
            }

            notPageNowElem.val(parseInt($("#notTotalPages").val() - 1));

            $.get("news/notpage",
                $("#notPageForm").serialize(),
                function (pager, status) {
                    whenNotQuerySuccess(pager, status);
                },
                'json'
            )
        });
    })

</script>
<script src="../static/js/jquery-2.1.3.min.js" th:src="@{/js/jquery-2.1.3.min.js}"></script>
<!--Bootstrap JS-->
<script src="js/bootstrap.min.js"></script>
<!--Owl Carousel-->
<script src="vendors/owl.carousel/js/owl.carousel.min.js"></script>
</body>
</html>
